<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="parser_8py" kind="file" language="Python">
    <compoundname>parser.py</compoundname>
    <innerclass refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser" prot="public">bym::BYM_project::main_app::parser::Parser</innerclass>
    <innerclass refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka" prot="public">bym::BYM_project::main_app::parser::Lavka</innerclass>
    <innernamespace refid="namespacebym">bym</innernamespace>
    <innernamespace refid="namespacebym_1_1_b_y_m__project">bym::BYM_project</innernamespace>
    <innernamespace refid="namespacebym_1_1_b_y_m__project_1_1main__app">bym::BYM_project::main_app</innernamespace>
    <innernamespace refid="namespacebym_1_1_b_y_m__project_1_1main__app_1_1parser">bym::BYM_project::main_app::parser</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacebym_1_1_b_y_m__project_1_1main__app_1_1parser" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/>selenium.webdriver<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Chrome</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>selenium.webdriver.common.by<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>By</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>selenium.webdriver.common.keys<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Keys</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>selenium.webdriver.support<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>expected_conditions<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>EC</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>selenium.webdriver.support.ui<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>WebDriverWait</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>selenium<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>webdriver</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>selenium.webdriver.chrome.service<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Service<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>ChromeService</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>webdriver_manager.chrome<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ChromeDriverManager</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>main_app.config<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>urls_lavka,<sp/>webdriver_name</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>bs4<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>BeautifulSoup</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>asyncio</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>main_app.models<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Product,<sp/>Shop,<sp/>User,<sp/>UnitOfMeasure</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>main_app.conversions_functions<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_lavka_unit_id</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16" refid="namespacebym_1_1_b_y_m__project_1_1main__app_1_1parser_1a741bfb7f8809b3d04e5d9c6509de9c69" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">parse_by_address(user_id,<sp/>city_street,<sp/>number):</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>a<sp/>=<sp/><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka" kindref="compound">Lavka</ref>(user_id)</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>asyncio.run(a.pars(&quot;Москва,<sp/>Таллинская<sp/>улица&quot;,<sp/>&quot;34&quot;))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/>asyncio.run(a.pars(city_street,<sp/>number))</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/>a.sql_script()</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser" kindref="compound">Parser</ref>:</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Определяет<sp/>базавый<sp/>класс<sp/>используемый<sp/>для<sp/>парсинга<sp/>всех<sp/>сайтов</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1acfb5504aa987e575ccfbe05617190604" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1acfb5504aa987e575ccfbe05617190604" kindref="member">__init__</ref>(self,<sp/>user_id,<sp/>shop_id):</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!</highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Инициализирует<sp/>класс<sp/>Parser.</highlight></codeline>
<codeline lineno="31"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>user_id</highlight></codeline>
<codeline lineno="32"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>shop_id</highlight></codeline>
<codeline lineno="33"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1aed9cf2be1a6f7d6b919c1e785439841f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1aed9cf2be1a6f7d6b919c1e785439841f" kindref="member">user_obj</ref><sp/>=<sp/>User.objects.get(pk=user_id)</highlight></codeline>
<codeline lineno="35" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a5c931b5a38f849cc37bef4901ce4b4d6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a5c931b5a38f849cc37bef4901ce4b4d6" kindref="member">options</ref><sp/>=<sp/>webdriver.ChromeOptions()</highlight></codeline>
<codeline lineno="36" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a6b93696ad189eeeb4ce00ce8ff8f2808" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a6b93696ad189eeeb4ce00ce8ff8f2808" kindref="member">product_list</ref><sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="37" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1ab419c1f3c1d5bcc94f0bdb3af2b175a2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1ab419c1f3c1d5bcc94f0bdb3af2b175a2" kindref="member">shop_obj</ref><sp/>=<sp/>Shop.objects.get(pk=shop_id)</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a86d3e44d06c24d8d354c5eb2ed5a8cde" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a86d3e44d06c24d8d354c5eb2ed5a8cde" kindref="member">sql_script</ref>(self):</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!<sp/>Сохраняет<sp/>в<sp/>базу<sp/>данных</highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;-----START_SAVE_BD------&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a6b93696ad189eeeb4ce00ce8ff8f2808" kindref="member">product_list</ref>:</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>if<sp/>x[&quot;unit&quot;]<sp/>==<sp/>&apos;шт.&apos;:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/><sp/>надо<sp/>поработать<sp/>c<sp/>get<sp/>UnitOfMeasure</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unit_obj<sp/>=<sp/>get_lavka_unit_id(x[</highlight><highlight class="stringliteral">&apos;unit&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_,<sp/>created<sp/>=<sp/>Product.objects.get_or_create(user=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1aed9cf2be1a6f7d6b919c1e785439841f" kindref="member">user_obj</ref>,</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unit=unit_obj,</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shop=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1ab419c1f3c1d5bcc94f0bdb3af2b175a2" kindref="member">shop_obj</ref>,<sp/>name=x[</highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>price=x[</highlight><highlight class="stringliteral">&quot;price&quot;</highlight><highlight class="normal">],<sp/>amount=x[</highlight><highlight class="stringliteral">&quot;amount&quot;</highlight><highlight class="normal">],<sp/>link=x[</highlight><highlight class="stringliteral">&quot;link&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;-----END------&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka" kindref="compound">Lavka</ref>(<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser" kindref="compound">Parser</ref>):</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!</highlight></codeline>
<codeline lineno="58"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Определяет<sp/>класс<sp/>используемый<sp/>для<sp/>парсинга<sp/>лавки.</highlight></codeline>
<codeline lineno="59"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ae79912d1031916b7daf34ee69d05e8d6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ae79912d1031916b7daf34ee69d05e8d6" kindref="member">__init__</ref>(self,<sp/>user_id):</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!</highlight></codeline>
<codeline lineno="63"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Инициализирует<sp/>класс<sp/>Lavka.</highlight></codeline>
<codeline lineno="64"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>user_id<sp/>int</highlight></codeline>
<codeline lineno="65"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super().<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ae79912d1031916b7daf34ee69d05e8d6" kindref="member">__init__</ref>(user_id,<sp/>1)</highlight></codeline>
<codeline lineno="67" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a23885f0e3a25fe52b40160bf50b95d86" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a23885f0e3a25fe52b40160bf50b95d86" kindref="member">url_main</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;https://lavka.yandex.ru&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a5c931b5a38f849cc37bef4901ce4b4d6" kindref="member">options</ref>.add_argument(</highlight><highlight class="stringliteral">&quot;--start-maximized&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prefs<sp/>=<sp/>{</highlight><highlight class="stringliteral">&quot;profile.managed_default_content_settings.images&quot;</highlight><highlight class="normal">:<sp/>2}</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a5c931b5a38f849cc37bef4901ce4b4d6" kindref="member">options</ref>.add_experimental_option(</highlight><highlight class="stringliteral">&quot;prefs&quot;</highlight><highlight class="normal">,<sp/>prefs)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a5c931b5a38f849cc37bef4901ce4b4d6" kindref="member">options</ref>.headless<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a5c931b5a38f849cc37bef4901ce4b4d6" kindref="member">options</ref>.page_load_strategy<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;eager&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref><sp/>=<sp/>Chrome(options=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a5c931b5a38f849cc37bef4901ce4b4d6" kindref="member">options</ref>,<sp/>service=ChromeService(ChromeDriverManager().install()))</highlight></codeline>
<codeline lineno="74" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ab11214453defaf1caacb34e33abbe04f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ab11214453defaf1caacb34e33abbe04f" kindref="member">wait</ref><sp/>=<sp/>WebDriverWait(self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref>,<sp/>100)</highlight></codeline>
<codeline lineno="75" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ad7973256e11d6291b8641b3e438ca595" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ad7973256e11d6291b8641b3e438ca595" kindref="member">urls</ref><sp/>=<sp/>urls_lavka</highlight></codeline>
<codeline lineno="76" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref><sp/>=<sp/>dict(product_block=</highlight><highlight class="stringliteral">&quot;p10zc8qs&quot;</highlight><highlight class="normal">,<sp/>product_name=</highlight><highlight class="stringliteral">&quot;l4t8cc8&quot;</highlight><highlight class="normal">,<sp/>product_link=</highlight><highlight class="stringliteral">&quot;p11oed5n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>discount_price=</highlight><highlight class="stringliteral">&quot;b1bvai5j&quot;</highlight><highlight class="normal">,<sp/>no_discount_price=</highlight><highlight class="stringliteral">&quot;c1jd7nwq&quot;</highlight><highlight class="normal">,<sp/>amount_and_unit=</highlight><highlight class="stringliteral">&quot;iks4ndv&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a44f7318d5af307484c100b74733461b3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a44f7318d5af307484c100b74733461b3" kindref="member">get_data_product</ref>(self,<sp/>product):</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!</highlight></codeline>
<codeline lineno="81"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Выделяет<sp/>из<sp/>блока<sp/>с<sp/>информацией<sp/>о<sp/>продукте<sp/>нужную<sp/>и<sp/>записывает<sp/>в<sp/>БД</highlight></codeline>
<codeline lineno="82"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>product<sp/>BeautifulSoup</highlight></codeline>
<codeline lineno="83"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;product_name&quot;</highlight><highlight class="normal">])<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;product_link&quot;</highlight><highlight class="normal">])<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;product_name&quot;</highlight><highlight class="normal">]).get_text().replace(</highlight><highlight class="stringliteral">&apos;­&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>print(name)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;discount_price&quot;</highlight><highlight class="normal">])<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>price<sp/>=<sp/>int(</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;discount_price&quot;</highlight><highlight class="normal">]).get_text().replace(</highlight><highlight class="stringliteral">&apos;₽&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">).replace(</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">).replace(</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos; &apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>price<sp/>=<sp/>int(</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;no_discount_price&quot;</highlight><highlight class="normal">]).get_text().replace(</highlight><highlight class="stringliteral">&apos;₽&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">).replace(</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">).replace(</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos; &apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link<sp/>=<sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a23885f0e3a25fe52b40160bf50b95d86" kindref="member">url_main</ref><sp/>+<sp/>product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;product_link&quot;</highlight><highlight class="normal">])[</highlight><highlight class="stringliteral">&apos;href&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>am_un<sp/>=<sp/>product.find(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;amount_and_unit&quot;</highlight><highlight class="normal">]).get_text()</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>amount<sp/>=<sp/>float(am_un[:am_un.find(</highlight><highlight class="stringliteral">&apos; &apos;</highlight><highlight class="normal">)].replace(</highlight><highlight class="stringliteral">&apos;,&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unit<sp/>=<sp/>am_un[am_un.find(</highlight><highlight class="stringliteral">&apos; &apos;</highlight><highlight class="normal">)<sp/>+<sp/>1:]</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_parser_1a6b93696ad189eeeb4ce00ce8ff8f2808" kindref="member">product_list</ref>.append({</highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">:<sp/>name,<sp/></highlight><highlight class="stringliteral">&quot;price&quot;</highlight><highlight class="normal">:<sp/>price,<sp/></highlight><highlight class="stringliteral">&quot;link&quot;</highlight><highlight class="normal">:<sp/>link,<sp/></highlight><highlight class="stringliteral">&quot;amount&quot;</highlight><highlight class="normal">:<sp/>amount,<sp/></highlight><highlight class="stringliteral">&quot;unit&quot;</highlight><highlight class="normal">:<sp/>unit})</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>print(&quot;pass&quot;)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa85beac3725cdc9934390e1c49fcb9f1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa85beac3725cdc9934390e1c49fcb9f1" kindref="member">get_data_html</ref>(self,<sp/>html):</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!</highlight></codeline>
<codeline lineno="109"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Разбивает<sp/>html<sp/>код<sp/>на<sp/>блоки<sp/>по<sp/>продуктам,<sp/>асинхронно<sp/>запускает<sp/>их<sp/>обработку</highlight></codeline>
<codeline lineno="110"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>html<sp/>string</highlight></codeline>
<codeline lineno="111"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>soup<sp/>=<sp/>BeautifulSoup(html,<sp/></highlight><highlight class="stringliteral">&apos;html.parser&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>products<sp/>=<sp/>soup.find_all(class_=self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a928051a5a0fb32b70882272b9c97983c" kindref="member">sl_tags</ref>[</highlight><highlight class="stringliteral">&quot;product_block&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tasks<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>loop2<sp/>=<sp/>asyncio.get_event_loop()</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>product<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>products:</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>task<sp/>=<sp/>loop2.create_task(self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a44f7318d5af307484c100b74733461b3" kindref="member">get_data_product</ref>(product))</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tasks.append(task)</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>asyncio.wait(tasks)</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123" refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a16780d5d1ca7bb8cf262758e2dac66ee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a16780d5d1ca7bb8cf262758e2dac66ee" kindref="member">pars</ref>(self,<sp/>city_street,<sp/>home):</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&apos;&apos;!</highlight></codeline>
<codeline lineno="125"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Парсит<sp/>список<sp/>продуктов<sp/>с<sp/>ценами<sp/>яндекс<sp/>лавки<sp/>по<sp/>определенному<sp/>адресу</highlight></codeline>
<codeline lineno="126"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Производит<sp/>запись<sp/>в<sp/>базу<sp/>данных</highlight></codeline>
<codeline lineno="127"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>city_strit<sp/>string</highlight></codeline>
<codeline lineno="128"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>home<sp/>string</highlight></codeline>
<codeline lineno="129"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;pars_start&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref>.get(self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1a23885f0e3a25fe52b40160bf50b95d86" kindref="member">url_main</ref><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;/10743/category/ovoshchi_griby_i_zelen&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ukaz_adr<sp/>=<sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ab11214453defaf1caacb34e33abbe04f" kindref="member">wait</ref>.until(EC.presence_of_element_located((By.XPATH,<sp/></highlight><highlight class="stringliteral">&apos;//*[@id=&quot;root&quot;]/div[2]/header/div[5]/button&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ukaz_adr.click()</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;adr_start&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ab11214453defaf1caacb34e33abbe04f" kindref="member">wait</ref>.until(EC.presence_of_element_located((By.CLASS_NAME,<sp/></highlight><highlight class="stringliteral">&apos;c12fmzph&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>asyncio.sleep(1)</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kr<sp/>=<sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ab11214453defaf1caacb34e33abbe04f" kindref="member">wait</ref>.until(EC.element_to_be_clickable(</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(By.XPATH,<sp/></highlight><highlight class="stringliteral">&apos;/html/body/div[2]/div[3]/div/div/div/div[1]/div[2]/div[1]/div/button&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kr.click()</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>adr_inp<sp/>=<sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref>.find_element(By.CLASS_NAME,<sp/></highlight><highlight class="stringliteral">&apos;i164506l&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lit<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>city_street:</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>adr_inp.send_keys(lit)</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>asyncio.sleep(0.1)</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>adr_inp.send_keys(</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>asyncio.sleep(1)</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lit<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>home:</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>adr_inp.send_keys(lit)</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>asyncio.sleep(1)</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>asyncio.sleep(5)</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>adr_inp.send_keys(Keys.DOWN)</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>adr_inp.send_keys(Keys.ENTER)</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ok<sp/>=<sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ab11214453defaf1caacb34e33abbe04f" kindref="member">wait</ref>.until(</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>EC.element_to_be_clickable((By.XPATH,<sp/></highlight><highlight class="stringliteral">&apos;/html/body/div[2]/div[3]/div/div/div/div[1]/div[2]/div[2]/button&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ok.click()</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ab11214453defaf1caacb34e33abbe04f" kindref="member">wait</ref>.until(EC.presence_of_element_located((By.CLASS_NAME,<sp/></highlight><highlight class="stringliteral">&apos;s17r5x1&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;adr_finish&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>k<sp/>=<sp/>6</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>j<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(0,<sp/>k):</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tasks<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>loop1<sp/>=<sp/>asyncio.get_event_loop()</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>=<sp/>j</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tabi<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>i<sp/>&lt;<sp/>len(self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ad7973256e11d6291b8641b3e438ca595" kindref="member">urls</ref>):</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref>.execute_script(f</highlight><highlight class="stringliteral">&quot;window.open(&apos;{self.urls[i]}&apos;,<sp/>&apos;tab{tabi}&apos;);&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>=<sp/>i<sp/>+<sp/>k</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tabi<sp/>=<sp/>tabi<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>=<sp/>j</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tabi<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>i<sp/>&lt;<sp/>len(self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1ad7973256e11d6291b8641b3e438ca595" kindref="member">urls</ref>):</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref>.switch_to.window(f</highlight><highlight class="stringliteral">&apos;tab{tabi}&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>html<sp/>=<sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref>.page_source</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>task<sp/>=<sp/>loop1.create_task(self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa85beac3725cdc9934390e1c49fcb9f1" kindref="member">get_data_html</ref>(html))</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tasks.append(task)</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>=<sp/>i<sp/>+<sp/>k</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tabi<sp/>=<sp/>tabi<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>asyncio.wait(tasks)</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbym_1_1_b_y_m__project_1_1main__app_1_1parser_1_1_lavka_1aa4d243133ee2225c281004cada6c617f" kindref="member">driver</ref>.quit()</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight><highlight class="comment">#<sp/>a<sp/>=<sp/>Lavka()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight><highlight class="comment">#<sp/>asyncio.run(a.pars(&quot;Москва,<sp/>Таллинская<sp/>улица&quot;,&quot;34&quot;))</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="parser.py"/>
  </compounddef>
</doxygen>
